(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[939],{5981:e=>{e.exports={fabContainer:"UserQuickLinks_fabContainer__Q5xv3",fabButton:"UserQuickLinks_fabButton__1Oocl",fabIconClose:"UserQuickLinks_fabIconClose__vXLbD",fabIconMenu:"UserQuickLinks_fabIconMenu__9tMCF",menuWrapper:"UserQuickLinks_menuWrapper__ma7Bq",dropdown:"UserQuickLinks_dropdown__snFr7",linksSection:"UserQuickLinks_linksSection__c4A7M",menuOpen:"UserQuickLinks_menuOpen__hJ9GZ",menuClosed:"UserQuickLinks_menuClosed__XJmw7",avatarWrapper:"UserQuickLinks_avatarWrapper__wP_nJ",link:"UserQuickLinks_link__iEXZL",active:"UserQuickLinks_active__ZZ2TW"}},6829:e=>{e.exports={pageContainer:"page_pageContainer__KSUTQ",postsContainer:"page_postsContainer__7z10D"}},6955:(e,s,r)=>{"use strict";r.d(s,{PostsPageClient:()=>m});var n=r(5155),i=r(9644),o=r(7183),a=r(5838),t=r(8822),l=r(2115),c=r(3721),d=r(7257),u=r(8725),h=r(6829),p=r.n(h);let m=e=>{let{rawParam:s}=e,r=(0,o.b)(s),h=r?s:s.startsWith("@")?s.slice(1):s,{getSingleProfile:m,getPostsForPublicKey:_}=(0,i.P)(),{data:v,isLoading:f,isError:b,error:P}=(0,a.useQuery)({queryKey:r?d.lH.profileByPublicKey(s):d.lH.profileByUsername(h),queryFn:async()=>{var e;let n=r?await m({PublicKeyBase58Check:s}):await m({Username:h});if(!n.success||!(null===(e=n.data)||void 0===e?void 0:e.Profile))throw Error(n.error||"Failed to load profile");return n.data.Profile}}),{data:k,fetchNextPage:x,hasNextPage:w,isFetchingNextPage:g,isLoading:C,error:L}=(0,t.useInfiniteQuery)({queryKey:d.lH.userPosts(h),queryFn:async e=>{let{pageParam:s=""}=e,n=await _({PublicKeyBase58Check:r?h:void 0,Username:r?void 0:h,LastPostHashHex:s,NumToFetch:10});if(!n.success)throw Error(n.error||"Failed to fetch posts");return n.data},getNextPageParam:e=>{var s;let r=(null==e?void 0:e.Posts)||[];return r.length<10?void 0:null===(s=r.at(-1))||void 0===s?void 0:s.PostHashHex},staleTime:6e4}),j=(0,l.useRef)(null);if((0,l.useEffect)(()=>{if(!w||g)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&x()},{rootMargin:"200px 0px",threshold:0}),s=j.current;return s&&e.observe(s),()=>{s&&e.unobserve(s)}},[w,g,x]),C)return(0,n.jsx)("p",{children:"Loading posts..."});if(L)return(0,n.jsx)("p",{style:{color:"red"},children:L.message});let U=(null==k?void 0:k.pages.flatMap(e=>e.Posts||[]))||[];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.M,{profile:v,rawParam:s}),0===U.length&&(0,n.jsx)("p",{children:"No posts found."}),(0,n.jsx)("div",{className:p().postsContainer,children:U.map(e=>(0,n.jsx)("div",{children:(0,n.jsx)(c.L,{post:e,username:s,userProfile:v})},e.PostHashHex))}),(0,n.jsx)("div",{ref:j,style:{height:"1px"}}),g&&(0,n.jsx)("p",{children:"Loading more..."})]})}},7405:e=>{e.exports={page:"Page_page__6ZDsr",noPadding:"Page_noPadding__szQIs"}},8153:(e,s,r)=>{Promise.resolve().then(r.bind(r,8902)),Promise.resolve().then(r.bind(r,7252)),Promise.resolve().then(r.bind(r,6715)),Promise.resolve().then(r.bind(r,382)),Promise.resolve().then(r.bind(r,8822)),Promise.resolve().then(r.bind(r,2490)),Promise.resolve().then(r.bind(r,5041)),Promise.resolve().then(r.bind(r,9138)),Promise.resolve().then(r.bind(r,1610)),Promise.resolve().then(r.bind(r,5838)),Promise.resolve().then(r.bind(r,5490)),Promise.resolve().then(r.bind(r,1142)),Promise.resolve().then(r.bind(r,3666)),Promise.resolve().then(r.bind(r,6955)),Promise.resolve().then(r.t.bind(r,7405,23))},8725:(e,s,r)=>{"use strict";r.d(s,{M:()=>_});var n=r(5155),i=r(2115),o=r(6874),a=r.n(o),t=r(5695),l=r(9300),c=r.n(l),d=r(9987),u=r(5146),h=r(5781),p=r(5981),m=r.n(p);let _=e=>{let{profile:s,rawParam:r}=e,o=(0,t.usePathname)(),[l,p]=(0,i.useState)(!1),_=encodeURIComponent(r),v=(0,i.useRef)(null),f=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=window.scrollY,s=0,r=()=>{let r=window.scrollY;s+=Math.abs(r-e),l&&s>30&&(p(!1),s=0),e=r};return l&&(s=0,e=window.scrollY),window.addEventListener("scroll",r,{passive:!0}),()=>window.removeEventListener("scroll",r)},[l]),(0,u.L)([v,f],()=>{l&&p(!1)}),(0,n.jsxs)("div",{className:m().fabContainer,children:[(0,n.jsxs)("button",{ref:f,onClick:()=>{p(e=>!e)},className:m().fabButton,children:[l?(0,n.jsx)("span",{className:m().fabIconClose,children:"\xd7"}):(0,n.jsx)("span",{className:m().fabIconMenu,children:"â˜°"})," "]}),(0,n.jsx)("div",{ref:v,className:c()(m().menuWrapper,{[m().menuOpen]:l,[m().menuClosed]:!l}),children:(0,n.jsxs)(h.m,{className:m().dropdown,children:[(0,n.jsx)(a(),{href:"/".concat(_),className:m().avatarWrapper,onClick:()=>p(!1),children:(0,n.jsx)(d.e,{profile:s,size:"medium"})}),(0,n.jsx)("div",{className:m().linksSection,children:[{label:"\uD83D\uDCDD User Posts",href:"/".concat(_,"/posts")},{label:"\uD83D\uDE42 Follow Feed",href:"/".concat(_,"/feed")},{label:"\uD83D\uDD14 Notifications",href:"/".concat(_,"/notifications")}].map(e=>{let{label:s,href:r}=e;return(0,n.jsx)(a(),{href:r,onClick:()=>p(!1),className:c()(m().link,{[m().active]:o===r}),children:s},s)})})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[889,829,221,231,272,545,9,866,729,799,161,414,578,374,441,684,358],()=>s(8153)),_N_E=e.O()}]);