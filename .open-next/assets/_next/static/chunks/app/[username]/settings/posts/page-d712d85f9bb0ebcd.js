(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{147:e=>{e.exports={button:"Button_button__exqP_",primary:"Button_primary__DEC_1",disabled:"Button_disabled__8r9g4",secondary:"Button_secondary__9ex2D",danger:"Button_danger__MnjLX",small:"Button_small__dvm_S",medium:"Button_medium__j0vFR",large:"Button_large__C72gW",icon:"Button_icon__r3wfm",label:"Button_label__ijedD",loading:"Button_loading__U3vY1",spinner:"Button_spinner__XcCkv",spin:"Button_spin__ITV3l"}},495:()=>{},969:(e,t,s)=>{"use strict";s.d(t,{H:()=>n,J:()=>a});let n="https://node.deso.org/api/v0",a="https://node.deso.org"},2528:(e,t,s)=>{"use strict";s.d(t,{A:()=>r,O:()=>i});var n=s(5155),a=s(2115),o=s(2161);let l=(0,a.createContext)(null);function i(e){let{children:t}=e,[s,i]=(0,a.useState)(null),[r,c]=(0,a.useState)({}),[d,u]=(0,a.useState)(!0),p=(0,a.useRef)(!1);(0,a.useEffect)(()=>{p.current||(p.current=!0,(0,o.jK8)({spendingLimitOptions:{GlobalDESOLimit:.1*1e9,TransactionCountLimitMap:{SUBMIT_POST:"UNLIMITED"}},appName:"DeSo Next.js App"}),o.D_O.subscribe(e=>{let{currentUser:t,alternateUsers:s,event:n}=e;switch(console.log("Identity State:",e),console.log({alternateUsers:s}),n){case"LOGIN_START":break;case"SUBSCRIBE":case"LOGIN_END":case"CHANGE_ACTIVE_USER":case"LOGOUT_END":i((null==t?void 0:t.publicKey)||null),c(s||{}),u(!1)}}))},[]);let _=async()=>{await o.D_O.login().catch(e=>{console.log("Error: ",e),u(!1)})},b=async()=>{await o.D_O.logout().catch(e=>{console.log("Error: ",e),u(!1)})},g=async e=>await o.D_O.signTx(e),h=async e=>await o.D_O.submitTx(e),y=async e=>await o.D_O.signAndSubmit({TransactionHex:e}),m=async()=>await o.D_O.jwt();return(0,n.jsx)(l.Provider,{value:{userPublicKey:s,login:_,logout:b,setActiveUser:e=>{e&&o.D_O.setActiveUser(e)},altUsers:r,isAuthChecking:d,signTransaction:g,submitTransaction:h,signAndSubmitTransaction:y,getIdentityJWT:m},children:t})}let r=()=>(0,a.useContext)(l)},3437:(e,t,s)=>{"use strict";s.d(t,{SettingsPostsClient:()=>u});var n=s(5155),a=s(2115),o=s(9644),l=s(2528),i=s(7055),r=s(4905),c=s(8583),d=s.n(c);let u=()=>{let{userPublicKey:e,signAndSubmitTransaction:t}=(0,l.A)(),{userProfile:s}=(0,i.J)(),{getPostsForPublicKey:c,submitPost:u}=(0,o.P)(),[p,_]=(0,a.useState)(!1),[b,g]=(0,a.useState)(0),[h,y]=(0,a.useState)(!1),m=(0,a.useRef)(!1),f=async()=>{if(!e)return;_(!0),g(0),m.current=!1;let s="";for(;!m.current;){var n,a,o;let l=await c({PublicKeyBase58Check:e,Username:"",LastPostHashHex:s,NumToFetch:100,MediaRequired:!1,ReaderPublicKeyBase58Check:""});if(!l.success||!(null===(n=l.data.Posts)||void 0===n?void 0:n.length))break;for(let s of l.data.Posts){if(m.current)break;let n={UpdaterPublicKeyBase58Check:e,BodyObj:{Body:h&&(null==s?void 0:s.Body)?"deleted":(null==s?void 0:s.Body)||"",VideoURLs:h?[]:(null==s?void 0:s.VideoURLs)||null,ImageURLs:h?[]:(null==s?void 0:s.ImageURLs)||null},RepostedPostHashHex:(null==s?void 0:null===(a=s.RepostedPostEntryResponse)||void 0===a?void 0:a.PostHashHex)||"",PostHashHexToModify:s.PostHashHex,PostExtraData:h?{}:s.PostExtraData?{...s.PostExtraData}:void 0,IsHidden:!0,MinFeeRateNanosPerKB:1500};try{let e=await u(n);if(e.success&&(null===(o=e.data)||void 0===o?void 0:o.TransactionHex)){let s=await t(e.data.TransactionHex);(null==s?void 0:s.PostEntryResponse)?g(e=>e+1):console.warn("Post deletion failed to finalize:",s)}else e.error&&console.error("submitPost error:",e.error)}catch(e){console.error("Post deletion error:",e)}}let i=l.data.Posts[l.data.Posts.length-1];if(!(s=null==i?void 0:i.PostHashHex)||l.data.Posts.length<100)break}_(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{children:"Post Management"}),(0,n.jsxs)("div",{className:d().userInfo,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Username:"})," ",null==s?void 0:s.Username]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:"Public Key:"})," ",e]})]}),(0,n.jsx)("p",{children:"Click the button below to hide all your posts in bulk."}),(0,n.jsxs)("div",{className:d().controls,children:[(0,n.jsx)(r.$,{onClick:f,variant:"danger",isLoading:p,disabled:!e,children:"Delete All Posts"}),(0,n.jsx)(r.$,{onClick:()=>{m.current=!0},variant:"secondary",disabled:!p,children:"Cancel"})]}),(0,n.jsx)("div",{className:d().status,children:p?"Deleting... ".concat(b," posts so far."):"Deleted: ".concat(b," posts")}),(0,n.jsxs)("label",{className:d().hardDeleteOption,children:[(0,n.jsx)("input",{type:"checkbox",checked:h,onChange:()=>y(!h),disabled:p}),(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{style:{color:"red"},children:"WARNING!"})," This is ",(0,n.jsx)("strong",{children:"OPTIONAL!"})," If you check this, your posts will be not just hidden but also overwritten with the word ",(0,n.jsx)("strong",{children:'"deleted"'}),", all attached media will also be removed.",(0,n.jsx)("br",{}),"If you do this, it will be ",(0,n.jsx)("strong",{children:"extremely hard"})," to restore the original content of your post.",(0,n.jsx)("br",{}),(0,n.jsx)("em",{children:"I am not responsible to restore your posts."})]})]}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("span",{children:"PS Make sure you have some DESO balance on your accout to cover transaction fees"})]})}},4905:(e,t,s)=>{"use strict";s.d(t,{$:()=>p});var n=s(5155),a=s(8637),o=s.n(a),l=s(6874),i=s.n(l),r=s(147),c=s.n(r),d=s(9300),u=s.n(d);let p=e=>{let{children:t,type:s="button",variant:a="primary",size:o="medium",disabled:l=!1,isLoading:r=!1,icon:d=null,trailingIcon:p=null,href:_=null,as:b=null,onClick:g,className:h,...y}=e,m=u()(c().button,c()[a],c()[o],{[c().loading]:r,[c().disabled]:l||r},h),f=(0,n.jsxs)(n.Fragment,{children:[r?(0,n.jsx)("span",{className:c().spinner,"aria-hidden":"true"}):d&&(0,n.jsx)("span",{className:c().icon,children:d}),(0,n.jsx)("span",{className:c().label,children:t}),!r&&p&&(0,n.jsx)("span",{className:c().icon,children:p})]});return _?(0,n.jsx)(i(),{href:l||r?"#":_,className:m,onClick:e=>{if(l||r){e.preventDefault();return}g&&g(e)},"aria-disabled":l||r,...y,children:f}):b?(0,n.jsx)(b,{className:m,onClick:e=>{if(l||r){e.preventDefault();return}g&&g(e)},"aria-disabled":l||r,role:"button",tabIndex:l||r?-1:0,...y,children:f}):(0,n.jsx)("button",{type:s,className:m,disabled:l||r,onClick:g,...y,children:f})};p.propTypes={children:o().node.isRequired,type:o().oneOf(["button","submit","reset"]),variant:o().oneOf(["primary","secondary","danger"]),size:o().oneOf(["small","medium","large"]),disabled:o().bool,isLoading:o().bool,icon:o().node,trailingIcon:o().node,href:o().string,as:o().elementType,className:o().string},p.defaultProps={type:"button",variant:"primary",size:"medium",disabled:!1,isLoading:!1,icon:null,trailingIcon:null,href:null,as:null,className:void 0}},7055:(e,t,s)=>{"use strict";s.d(t,{J:()=>c,v:()=>r});var n=s(5155),a=s(2115),o=s(9644),l=s(2528);let i=(0,a.createContext)(null);function r(e){let{children:t}=e,{userPublicKey:s,altUsers:r}=(0,l.A)(),{getSingleProfile:c,getUsersStateless:d}=(0,o.P)(),[u,p]=(0,a.useState)(null),[_,b]=(0,a.useState)(!1),[g,h]=(0,a.useState)(null),[y,m]=(0,a.useState)(null),[f,x]=(0,a.useState)(!1),[v,P]=(0,a.useState)(null),j=(0,a.useCallback)(async()=>{if(!s){p(null),h(null);return}b(!0),h(null);try{let e=await c({PublicKeyBase58Check:s});e.success?p(e.data.Profile):(p(null),h(e.error))}catch(e){p(null),h((null==e?void 0:e.message)||"Error loading user profile")}finally{b(!1)}},[s,c]),k=(0,a.useCallback)(async()=>{if(!r||0===Object.keys(r).length){m(null),P(null);return}let e=Object.keys(r);x(!0),P(null);try{let t=await d({PublicKeysBase58Check:e,SkipForLeaderboard:!0});t.success?m(t.data.UserList):(m(null),P(t.error))}catch(e){m(null),P((null==e?void 0:e.message)||"Error loading alt users profiles")}finally{x(!1)}},[r,d]);return(0,a.useEffect)(()=>{j(),k()},[j,k]),(0,n.jsx)(i.Provider,{value:{userProfile:u,isUserProfileLoading:_,userProfileError:g,fetchUserProfile:j,altUserProfiles:y,isAltUserProfileSLoading:f,altUserProfilesError:v,fetchAltUserProfiles:k},children:t})}let c=()=>(0,a.useContext)(i)},7405:e=>{e.exports={page:"Page_page__6ZDsr",noPadding:"Page_noPadding__szQIs"}},7790:()=>{},8583:e=>{e.exports={container:"page_container__1cjmv",info:"page_info__co28e",publicKey:"page_publicKey__vLYM2",actions:"page_actions__Q60Tl",controls:"page_controls__Ijg8m",button:"page_button__98ZqU",deleteButton:"page_deleteButton___nC7m",cancelButton:"page_cancelButton__DkAnn",status:"page_status__ttYz5",userInfo:"page_userInfo__cmH_w",hardDeleteOption:"page_hardDeleteOption__pc8i0"}},9644:(e,t,s)=>{"use strict";s.d(t,{P:()=>o});var n=s(2115),a=s(969);function o(){let e=a.H,t=(0,n.useMemo)(()=>(function(e){let{baseUrl:t}=e;return async function(e){let{endpoint:s,options:n={}}=e,a={method:"POST",headers:n.body instanceof FormData?{...n.headers}:{"Content-Type":"application/json",...n.headers},...n};try{let e=await fetch("".concat(t,"/").concat(s),a),n=await e.json();return e.ok?{success:!0,data:n}:{success:!1,error:(null==n?void 0:n.error)||"Unknown API error"}}catch(e){return{success:!1,error:(null==e?void 0:e.message)||"Network error"}}}})({baseUrl:e}),[e]),s=(0,n.useCallback)(e=>t({endpoint:"get-single-profile",options:{body:JSON.stringify(e)}}),[t]),o=(0,n.useCallback)(e=>t({endpoint:"get-users-stateless",options:{body:JSON.stringify(e)}}),[t]),l=(0,n.useCallback)(()=>t({endpoint:"total-supply",options:{method:"GET"}}),[t]),i=(0,n.useCallback)(()=>t({endpoint:"get-exchange-rate",options:{method:"GET"}}),[t]),r=(0,n.useCallback)(e=>t({endpoint:"submit-post",options:{body:JSON.stringify(e)}}),[t]),c=(0,n.useCallback)(e=>t({endpoint:"get-posts-for-public-key",options:{body:JSON.stringify(e)}}),[t]),d=(0,n.useCallback)(e=>t({endpoint:"get-single-post",options:{body:JSON.stringify(e)}}),[t]),u=(0,n.useCallback)(e=>t({endpoint:"get-profiles",options:{body:JSON.stringify(e)}}),[t]),p=(0,n.useCallback)(e=>t({endpoint:"get-posts-stateless",options:{body:JSON.stringify(e)}}),[t]);return{getSingleProfile:s,getUsersStateless:o,getTotalSupply:l,getExchangeRate:i,submitPost:r,getPostsForPublicKey:c,getSinglePost:d,getProfiles:u,getPostsStateless:p,getNotifications:(0,n.useCallback)(e=>t({endpoint:"get-notifications",options:{body:JSON.stringify(e)}}),[t]),uploadImage:(0,n.useCallback)(e=>{let{imageFile:s,userPublicKey:n,jwt:a}=e;if(!s||!n||!a)return Promise.resolve({success:!1,error:"Missing data"});let o=new FormData;return o.append("file",s),o.append("UserPublicKeyBase58Check",n),o.append("JWT",a),t({endpoint:"upload-image",options:{body:o}})},[t])}}},9686:(e,t,s)=>{Promise.resolve().then(s.bind(s,3437)),Promise.resolve().then(s.t.bind(s,7405,23))}},e=>{var t=t=>e(e.s=t);e.O(0,[889,829,221,231,272,9,866,441,684,358],()=>t(9686)),_N_E=e.O()}]);